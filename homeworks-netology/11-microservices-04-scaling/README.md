# Ответы на задания 11-microservices-04-scaling   

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развёртывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- поддержка контейнеров;
- обеспечивать обнаружение сервисов и маршрутизацию запросов;
- обеспечивать возможность горизонтального масштабирования;
- обеспечивать возможность автоматического масштабирования;
- обеспечивать явное разделение ресурсов, доступных извне и внутри системы;
- обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п.

Обоснуйте свой выбор.

------

## Ответ к Задаче 1

Всем заявленным критериям соответствует **Kubernetes** (особенно удобно отвечать на этот вопрос после начала соответствующих лекций и почти прочитанной книги Джея Вьяса и Криса Лава). И, если с точки зрения DevOps специалиста можно и нужно рассматривать не только этот вариант, то с точки зрения менеджемента - ответ на вопрос очевидный. K8S - де-факто стандарт в настоящее время, это означает, что продукт:
- широко распространен;
- регулярно обновляется;
- имеет развитую поддержку со стороны сообщества;
- имеет качественную документацию;
- пользованию им и администрированию учат в онлайн (и не только) школах;
- на рынке труда не будет проблем с поиском специалистов для поддержки и ослуживания.
Рассмотрим еще несколько вариантов софта, которые могут также отвечать заявленным требованиям:
1. **Docker swarm** - встроенное в Docker решение, может подойти для организации небольших кластеров (в документации рекомендовано 7 узлов-менеджеров). Организационно проще K8S из-за отсутствия большого числа слоев-абстракций, в следствии этого - быстрее. Для конфигурации используются файлы YAML и JSON. Нет шаблонизатора, не доступно автомасштабирование, нет гибких инструментов управления сетью. По безопасности Docker swarm проигрывает K8S, однако предоставляет возможность использовать TLS и дает возможность использовать самоподписанные корневые сертификаты или сертификаты от настраиваемого корневого центра сертификации.
2. **Nomad от HashiCorp** - из плюсов стоит отметить: быстродействие, легкость управления и настройки, заявленная в документации возможность масштабирваться до кластера в 10 000 нод. Из минусов (особенностей) - в отличие от K8S использует свой язык разметки файлов HCL, вместо стандартного YAML, не так гибок, как Кубер в отношении организации сетей, не имеет инструмента для шаблонизации. С точки зрения безопасности K8S поддерживает namespaces, что позволяет разделять среды разработки. В Nomand необходимо использовать Vault.
3. **Apache Mesos** - ориентирован не только на контейнерные приложения в отличие от K8S. Прост в установке, однако более сложен в дальнейшем администрировании. С точки зрения производительности превосходит Kubernetes. Шаблоны конфигураций также поддерживаются. Для мониторинга в связке с Mesos, равно как и с K8S классикой является ELK + Prometheus + Grafana.


