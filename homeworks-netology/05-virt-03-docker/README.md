## Задача 1

Сценарий выполнения задачи:  

- создайте свой репозиторий на https://hub.docker.com;
- выберите любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```

Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

## Решение 1  
Скачиваем образ:  
```
docker pull nginx  
```  
Вносим необходимые изменения:  
```  
FROM nginx
RUN echo '<html><head>Hey, Netology</head><body><h1>I am DevOps Engineer!</h1></body></html>' >> /usr/share/nginx/html/index.html

```  
Собираем образ:  
```  
docker build -f dockerfile -t milvo/netology-devops:0.1 .
```  
Авторизуемся в Docker hub:  
```  
docker login -u milvo
```  
Выгружаем образ:  
```  
docker push milvo/netology-devops:0.1
```  
 [Ссылка на репозиторий](https://hub.docker.com/layers/milvo/netology-devops/0.1/images/sha256-231e783aac08a6cb48d24a48ff94fc0d4cea59a46d1a6653294c765369b60f83?context=repo)

## Задача 2  

Посмотрите на сценарий ниже и ответьте на вопрос:
«Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- высоконагруженное монолитное Java веб-приложение;
- Nodejs веб-приложение;
- мобильное приложение c версиями для Android и iOS;
- шина данных на базе Apache Kafka;
- Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;
- мониторинг-стек на базе Prometheus и Grafana;
- MongoDB как основное хранилище данных для Java-приложения;
- Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.
## Решение 2  
• высоконагруженное монолитное Java веб-приложение;  
При разворачивании и дальнейшей поддержке монолитного приложения, тем более высоконагруженного в использовании Docker смысла не вижу, т. к. обеспечить быстродействие будет сложнее, чем на виртуальной машине и тем более сложнее, чем на физическом сервере, обеспечивать балансировку нагрузки такого приложения средствами Docker бессмысленно. У монолитного приложения как правило меньше зависимостей, чем у микросервисного, т.о. преимущества от использования Docker минимальны.  
• Nodejs веб-приложение;   
Легковесное приложение на Nodejs предпочтительнее запускать в Docker, т.к. ресурсов оно потребляет не много — его легко будет портировать и при необходимости обеспечивать отказоустойчивость.  
• мобильное приложение c версиями для Android и iOS;  
Учитывая, что речь идёт о мобильном приложении, а, значит, о необходимости тестирования в среде с GUI подойдут либо виртуальные машины, либо физические серверы (если есть старенькие, т. к. в целом этот вариант избыточен).  
• шина данных на базе Apache Kafka;  
Для хранения данных предложил бы использовать VM, для микросервисов — Docker.  
• Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;  
Ноды Elasticsearch и logstash предложил бы разворачивать на VM для обеспечения высокого уровня надёжности и быстродействия, дорого, но приложения высоконагруженные, для kibana вполне подойдут ноды Docker и даже отказ будет не так критичен.  
• мониторинг-стек на базе Prometheus и Grafana;  
Однозначно Docker. Быстрое развертывание в том числе в кластере. Образы обоих программных продуктов есть на Docker Hub.  
• MongoDB как основное хранилище данных для Java-приложения;  
При использовании качественного оборудования, наличии технической поддержки со стороны производителя оборудования, использовании ПО для виртуализации Enterprise уровня, думаю, что данный кейс можно реализовать с применением виртуальных машин.  
• Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.  
Думаю, что в данном случае очень многое зависит от нагрузки на проект, т. к. в целом сформулированные задачи можно реализовать и на отдельном сервере и на ВМ и в контейнере. Для Git есть и образ отдельный на Docker Hub. Думаю, я бы предпочёл использовать ВМ, т. к. оба сервиса связаны с хранением данных и не имеют взаимодействия между собой.  
## Задача 3  
- Запустите первый контейнер из образа ***centos*** c любым тегом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```.
- Добавьте ещё один файл в папку ```/data``` на хостовой машине.
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.
## Решение 3    
Запускаем образы в фоновом режиме, предварительно скачав их:  
```
sudo docker run -dit -v /home/dmivlad/data://data debian
sudo docker run -dit -v /home/dmivlad/data://data centos
```
Убеждаемся, что контейнеры работают:  
```
dmivlad@HP-DIMA:~$ docker ps
CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS              PORTS     NAMES
a1bb4888e669   centos    "/bin/bash"   11 seconds ago       Up 10 seconds                 naughty_stonebraker
92e14718cf7b   debian    "bash"        About a minute ago   Up About a minute             heuristic_cerf
```
Подключаемся к первому контейнеру и создаем в примонтированной папке файл:  
```
docker exec -it naughty_stonebraker bash
```  
Отключаемся от контейнера и создаем файл на хост-машине  

Подключаемся к первому контейнеру и создаем в примонтированной папке файл:  
```
docker exec -it heuristic_cerf bash
```  
Выводим листинг файлов на втором контейнере:  
```  
root@92e14718cf7b:/data# ls -lh
total 8.0K
-rw-r--r-- 1 root root 23 Apr  1 08:58 netology.cfg
-rw-rw-r-- 1 1000 1000 20 Apr  1 09:00 network-map
```

