## Задача 1  
Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Решение 1  

- для хранения электронных чеков (документов), особенно, учитывая, что по условию хранение производится в формате JSON, наиболее подходящей будет документоориентированная БД - MongoDB, CouchDB.  
- OrientDB может быть оптимальным выбором для логистической компании. Графовые СУБД имеют в своем функционале возможность работы большим объемом данных, применяя механизмы графовых вычислений, давай возможность оптимизировать авто-трафик транспортной компании. 
- для хранения генеалогического дерева также считаю, что удобно использовать графовую СУБД, т.к. любые данные подобного типа по сути своей - граф.
- Redis, Memcache - оптимальные варианты для хранения кэш индентификаторов. Обеспечит скорость из-за отсутствия транзакций, на которые тратится большой ресурс времени. Кроме, того, раз хранить по условиям нужно кэш - данные временные.
- отношения клиент-покупка наилучшим образом хранить в реляционной БД (Firebird/Mysql/Postgre) для обеспечения возможности строить дополнительные отношения, что в рамках интернет-магазина может быть актуально.

## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

## Решение 2   

*CAP-теорема*
- AP, так как не гарантирует целостность, но обеспечивает доступность и возможность записи в асинхронном режиме.  
- CA, так как всегда целостна и имеет дубли данных на всех узлах.  
- CP, так как стремиться обеспечить целостность данных в ущерб доступности, может сбросить соединение при отсутсутствии согласованности данных в кластере.  

*PACELC-теорема*  
- PA/EC, так как в этой архитектуре при наличии сетевого разделения системы ставка должна делаться на доступность, а при отсутствии распределения – на консистентность.
- PC/EL, так как при необходимости разделения система должна быть максимально консистентной.
- PC/EC, так как при разделенности будет жертвовать доступностью, именно по этому возможен сброс соединения.

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?  

## Решение 3 

Несмотря на то, что BASE и ACID - два, противопоставляемых друг другу принципа, единственный тип БД, который пытается соответствовать обоим принципам одновременно - MongoDB (согласно информации из лекции). Однако, я предполагаю, что речь все же идет о большем или меньшем соответствии одному или другому принципам, иначе, MongoDB можно рекомендовать для использования в любых проектах, как идеальную.  

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

## Решение 4  

Key-value storage - максимально простой тип базы данных, которая хранит информацию в виде "ключ-значение". Наиболее популярными СУБД в данном сегменте являются Redis и Memcached. Механизм Pub/Sub (брокр сообщений) реализован в Redis. Данный механизм позволяет взаимодействовать Издателю с несолькими Подписчиками, рассылая сообщения по подписке в том числе производя отправку даже в том случае, если Подписчик отсутствует. На практике это применимо при ассинхронном взаимодействии микросервисов в рамках одного приложения или при реализации онлайн чатов.  
К минусам Redis можно отнести:  
- возможость использования только одного процессорного ядра для обработки;
- для хранения высокодоступных данных большого объема необходимо наличие соответствующего количества RAM;
- риск потери данных в случае отказа оборудования, т.к. их хранение реализовано в RAM;
- нет возможности реализовать отказоустойчивый кластер Redis.  

