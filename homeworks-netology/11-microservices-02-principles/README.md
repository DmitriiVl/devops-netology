# Ответы на задания 11-microservices-02-principles   

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.  

## Ответ к задаче 1  

ПО для оценки в большей мере взято со [страницы] (https://www.tecmint.com/open-source-api-gateways-and-management-tools/), также рассмотрено решение от [Yandex] (https://cloud.yandex.ru/services/api-gateway).

| Название ПО | Маршрутизация | Аутентификация | Терминация HTTPS | Способ распространения |
|------|------------|---|---|---|
|Kong Gateway (OSS)|yes|yes|yes|free|
|Tyk|yes|yes|yes|free|
|KrakenD|yes|yes|yes|paid service|
|Gravitee.io API Platform|yes|yes|yes|free whith restrictions|
|Gloo Edge|yes|yes|yes|free|
|API Umbrella|yes|yes|yes|free|
|NGINX|yes|yes|yes|free|
|Yandex API Gateway|yes|yes|yes|paid service|

В настоящее время не имел опыта разворачивания приложений на основе микросервисной архитектуры, использовать в продакшен из вышеперечисленных продуктов приходилось NGINX в качестве кэширующего веб-сервера, с точки зрения управляемости, объема имеющейся документации, ее качества и быстродействия софта предложил бы использовать его, учитывая, что с технической точки зрения подходит любой из вышеперечисленных вариантов. Для более осознанного выбора необходима практика использования хотя бы нескольких продуктов.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

## Ответ к задаче 2

| Название ПО | Поддержка кластеризации | Хранение сообщений на диске | Скорость работы | Поддержка различных форматов сообщений | Разделение прав доступа к различным потокам | Простота эксплуатации |
|------|---|--------|---|---|---|--------|
|**Kafka**|yes|yes|high, even high-load applications|yes|yes|the most simple|
|**RabbitMQ**|yes|yes|high except in high-load applications|yes|yes|yes, except high load services|
|**AWS SNS/SQS**|yes|yes|yes|yes|yes|yes, if your company uses Amazon infrastructure|

Подводя итог необходимо отметить, что для выбора конкретного ПО важно иметь опыт эксплуатации каждого из представленных вариантов. Наиболее подходящим вариантов видится все же Kafka, так как данный продукт полностью соответствует требованиям, является наиболее популярным и на данный момент - стандартом дефакто (то есть будет возможность легко обеспечить эксплуатацию и поддержку с точки зрения поиска специалистов). К минусам Kafka можно отнести проблемы с обработкой битых сообщений - из-за используемого механизма на их обработку тратится дополнительное время.  
AWS SNS/SQS может быть удобным (реализован механизм автоматических бэкапов), безопасным и надежным решением, если ваша компания использует экосистему Amazon, оданако перейти на сервис другого поставщика будет весьма проблематично.  
Конечный выбор продукта будет зависеть от конкретной решаемой задачи, а также от того чем архитектор системы готов пожертвовать, а что ставит в приоритет.   